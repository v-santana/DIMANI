{% include 'head.html'%}


<div class="form-group d-flex justify-content-center">
    <img src="/static/images/BANNER_BRANCO_DIMANI.PNG" alt="Fuzzy Cardigan" class="img-fluid" style="max-width: 500px; width:100%;">
</div>
<div class="container">
    <form class="forms needs-validation" id="cadastro-cliente" method="POST" novalidate>

        <!-- TÍTULO FORM -->
        <h2 class="form-title text-center">Dados de Cadastro</h2>
        <h4 class="form-title text-danger text-center" > {{mensagem}} </h4>
        <!-- /END TÍTULO FORM -->

        <!-- CPF -->
        <div class="form-group">
            <div class="col-md-6 offset-md-3">
                <label for="validationCustom01">CPF</label>
                <input type="text" name="cpf" class="form-control" id="validationCustom01" placeholder="Insira seu CPF" maxlength="11" pattern="(\d{3}\.?\d{3}\.?\d{3}-?\d{2})|(\d{2}\.?\d{3}\.?\d{3}/?\d{4}-?\d{2})" required>
                <div class="invalid-feedback">
                    Insira um CPF válido.
                </div>
            </div>
        </div>
        <!-- /END CPF -->

        <!-- NOME COMPLETO -->
        <div class="form-group">
            <div class="col-md-6 offset-md-3">
                <label for="validationCustom01">Nome Completo</label>
                <input type="text" name="nome_completo" class="form-control" id="validationCustom01" placeholder="Insira seu Nome Completo" maxlength="200" required>
                <div class="invalid-feedback">
                    Insira seu nome completo.
                </div>
            </div>
        </div>
        <!-- /END NOME COMPLETO -->

        <!-- DATA DE NASCIMENTO -->
        <div class="form-group">
            <div class="col-md-6 offset-md-3">
                <label for="validationCustom01">Data de Nascimento</label>
                <input type="date" name="dt_nasc" id="dt_nasc" min="1903-2-01"  class="form-control" id="validationCustom01" placeholder="Sua data de nascimento" required>
                <div class="invalid-feedback">
                    Insira uma data de nascmineto válida.
                </div>
            </div>
        </div>
        <!-- /END DATA DE NASCIMENTO -->

        <!-- CELULAR -->
        <div class="form-group-inline">
            <div class="col-md-6 offset-md-3">
                <label for="validationCustom01">Telefone</label>
                <input type="text" name="telefone" class="form-control" id="validationCustom01" placeholder="Insira seu telefone" maxlength="13" required>
                <div class="invalid-feedback">
                    Insira um número de telefone válido.
                </div>
            </div>
        </div>
        <!-- /END CELULAR -->

        <!-- E-MAIL -->
        <div class="col-md-6 offset-md-3">
            <label for="validationCustom01">E-mail</label>
            <input type="email" name="email" class="form-control" id="validationCustom01" placeholder="Endereço de e-mail" maxlength="100" required>

            <div class="invalid-feedback">
                Insira um endereço de e-mail válido.
            </div>
        </div>
        <!-- /END E-MAIL -->

        <!-- SENHA -->
        <div class="form-group">
            <div class="col-md-6 offset-md-3">
                <label for="validationCustom02">Senha</label>
                <input type="password" id="password1" name="senha" class="form-control" id="validationCustom02" placeholder="Insira a senha" required>
                <div class="invalid-feedback">
                    Digite uma senha.
                </div>
            </div>
        </div>
        <!-- /END SENHA -->

        <!-- SENHA CONFIRMAÇÃO -->
        <div class="form-group" >
            <div class="col-md-6 offset-md-3">
                <label for="validationCustom02">Confirmação senha</label>
                <input style="margin-bottom: 2%;"type="password" id="password2" name="confirmacao_senha" class="form-control" id="validationCustom02" placeholder="Insira novamente a senha" required>
                <div class="invalid-feedback">
                    As senhas não correspondem.
                </div>
            </div>
        </div>
        <!-- /END SENHA CONFIRMAÇÃO -->
        <div class="form-group" >
        <div class="col-md-6 offset-md-3">
            <label >Chave PIX: </label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="email" />
                    <label class="form-check-label" for="inlineRadio1">E-mail</label>
                </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="telefone"/>
                <label class="form-check-label" for="inlineRadio2">Telefone</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="cpf"/>
                <label class="form-check-label" for="inlineRadio3">CPF</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio4" value="nao_informou"/>
                <label class="form-check-label" for="inlineRadio4">Não desejo informar</label>
              </div>
              <small id="emailHelp" class="form-text text-muted">Somente para casos de estorno do valor.</small>
        </div>
        </div>
        <!-- BOTÃO PROSSEGUIR -->
        <div class="form-group">
            <div class="col-md-6 offset-md-3" style="margin-top: 2rem;">
                <button type="submit" class="btn btn-secondary btn-lg btn-block">Prosseguir</button>
            </div>
        </div>
        <!-- /END BOTÃO PROSSEGUOR -->
    </form>
</div>

<script>
    // Exemplo de JavaScript inicial para desativar envios de formulário, se houver campos inválidos.
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            // Pega todos os formulários que nós queremos aplicar estilos de validação Bootstrap personalizados.
            var forms = document.getElementsByClassName('needs-validation');
            // Faz um loop neles e evita o envio
            var validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();

//Verificações durante o submit do formulário de cadastro do cliente
$("#cadastro-cliente").submit(function(event){
        senha1 = document.getElementById("password1")
	    senha2 = document.getElementById("password2")
        let data_limite = new Date(1903,01,01,01,01,01)
        let hoje = new Date()
        data_formulario = document.getElementById("dt_nasc")
        //Verifica se a data é maior ou menor que datas limites - Maior que hoje ou menor que o limite.
        if (data_formulario.valueAsDate < data_limite) {
            data_formulario.classList.add('is-invalid')
            console.log("Caiu no primeiro")
            event.preventDefault();
            }
        if (data_formulario > hoje ) {
                data_formulario.classList.add('is-invalid')
                console.log("Caiu no segundo")
                event.preventDefault();
        }
        // verifica se as duas senhas são iguais
        if (senha1.value != senha2.value){
            senha2.classList.add('is-invalid')
            event.preventDefault();
        }
      });

</script>

{% include 'footer.html'%}